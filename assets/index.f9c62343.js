var O=Object.defineProperty;var A=Object.getOwnPropertySymbols;var $=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var g=(s,e,t)=>e in s?O(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,T=(s,e)=>{for(var t in e||(e={}))$.call(e,t)&&g(s,t,e[t]);if(A)for(var t of A(e))q.call(e,t)&&g(s,t,e[t]);return s};var f=(s,e,t)=>(g(s,typeof e!="symbol"?e+"":e,t),t);import{a as v,d as w,r as I,b as C,o as d,c as _,e as c,u as h,t as U,p as H,f as P,g as k,F as j,h as M,i as N,j as z,k as G,l as D}from"./vendor.aaf71282.js";const F=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function t(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerpolicy&&(r.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?r.credentials="include":o.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(o){if(o.ep)return;o.ep=!0;const r=t(o);fetch(o.href,r)}};F();var V="/web/assets/LogoLong.298e9c85.png";function J(s,e){localStorage.setItem(s,JSON.stringify(e))}function W(s,e=!0){let t=localStorage.getItem(s)||"{}";return e?JSON.parse(t):t}class K{constructor(e,t=!0){f(this,"token");f(this,"Authorization");f(this,"BaseRequest");this.user=t,this.BaseRequest=this.initRequest(),this.init(e,t)}init(e,t=!0){this.token=e||localStorage.getItem("token")||sessionStorage.getItem("token")||"",this.Authorization=`${t?"Bearer":"Bot"} ${e}`,this.BaseRequest=this.initRequest()}initRequest(){return v.create({baseURL:"https://discord.com/api/v9",method:"GET",headers:T({},this.headers)})}async getToken(e){let{data:t}=await v({url:"http://localhost:3001/services/discord-callback",method:"POST",data:{code:e,redirect_uri:"http://localhost:3000/discord-callback"}});return t.access_token?(this.token=t.access_token,t.access_token):t}getMe(){return this.BaseRequest({url:"/users/@me"})}getGuilds(){return this.BaseRequest({url:"/users/@me/guilds"})}getGuildChannel(e){return this.BaseRequest({url:`/guilds/${e}/channels`})}getGuildMembers(e){return this.BaseRequest({url:`/guilds/${e}/members`})}getGuildRoles(e){return this.BaseRequest({url:`/guilds/${e}/roles`})}get headers(){return{Authorization:this.Authorization||""}}}var L=(s,e)=>{const t=s.__vccOpts||s;for(const[n,o]of e)t[n]=o;return t};const p=s=>(H("data-v-163d6ec6"),s=s(),P(),s),Q={class:"flex flex-item-center"},X=["href"],Y=p(()=>c("img",{src:V,alt:""},null,-1)),Z=p(()=>c("p",null,"Avery",-1)),ee=[Y,Z],te={class:"menu"},se={class:"ul flex flex-item-center"},oe={class:"user flex flex-item-center"},re=["src"],ne=["textContent"],ie=p(()=>c("i",{class:"arrow"},null,-1)),ce=p(()=>c("div",{class:"licks"},null,-1)),ae=w({setup(s){const e=I(null),t=C({}),n="/web/";let o=W("token"),r=new K;(o==null?void 0:o.access_token)&&(r.init(o.access_token),r.getMe().then(a=>Object.assign(t,a.data)).catch(a=>console.log(a)));const i=()=>{window.open("https://discord.com/api/oauth2/authorize?client_id=863676847731376170&redirect_uri=http://localhost:3000/discord-callback&response_type=code&scope=identify+guilds+email","","width=500,height=620"),addEventListener("get_dc_code",async a=>{var b,x;let l=a;if((b=l==null?void 0:l.detail)==null?void 0:b.code){let{data:u}=await v({url:"http://localhost:3001/services/discord-callback",method:"POST",data:{code:(x=l.detail)==null?void 0:x.code,redirect_uri:"http://localhost:3000/discord-callback"}});if(console.log(u),!(u==null?void 0:u.error)){let{data:B}=await r.getMe();Object.assign(t,B),J("token",u||{})}}})},m=()=>e.value.classList.toggle("down");return(a,l)=>(d(),_("header",Q,[c("a",{href:h(n),class:"logo flex flex-item-center"},ee,8,X),c("div",te,[c("div",se,[c("div",oe,[Object.keys(h(t)).length>0?(d(),_("div",{key:0,class:"flex flex-item-center is-login",onClick:m,ref_key:"userEl",ref:e},[c("img",{src:`https://cdn.discordapp.com/avatars/${h(t).id}/${h(t).avatar}.png`,class:"user-icon",width:"45",alt:""},null,8,re),c("span",{class:"user-name",textContent:U(h(t).username)},null,8,ne),ie,ce],512)):(d(),_("div",{key:1,class:"login",onClick:i},"\u767B\u5165"))])])])]))}});var le=L(ae,[["__scopeId","data-v-163d6ec6"]]);const ue={};function de(s,e){return d(),_("footer")}var _e=L(ue,[["render",de]]);const he={class:"wrapper"},fe=w({setup(s){return(e,t)=>{const n=M("router-view");return d(),_(j,null,[k(le),c("div",he,[k(n)]),k(_e)],64)}}}),pe="modulepreload",R={},me="/web/",E=function(e,t){return!t||t.length===0?e():Promise.all(t.map(n=>{if(n=`${me}${n}`,n in R)return;R[n]=!0;const o=n.endsWith(".css"),r=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${r}`))return;const i=document.createElement("link");if(i.rel=o?"stylesheet":pe,o||(i.as="script",i.crossOrigin=""),i.href=n,document.head.appendChild(i),o)return new Promise((m,a)=>{i.addEventListener("load",m),i.addEventListener("error",a)})})).then(()=>e())},ge=[{name:"Home",path:"/",component:()=>E(()=>import("./Home.216fe6f4.js"),["assets/Home.216fe6f4.js","assets/Home.2bd0fa25.css","assets/vendor.aaf71282.js"])},{name:"discordCallback",path:"/discord-callback",component:()=>E(()=>import("./discord.ff08f877.js"),["assets/discord.ff08f877.js","assets/vendor.aaf71282.js"])}],ve=N({history:z("/web/"),routes:ge});var y;(function(s){s.SET_AUTH_STATUS="SET_AUTH_STATUS"})(y||(y={}));const ke={[y.SET_AUTH_STATUS]:(s,e)=>s.login=e===void 0?!s.login:e},ye={login:!1},Se={namespaced:!0,state:()=>ye,mutations:ke};var S;(function(s){s.AUTH="auth"})(S||(S={}));const be=G({modules:{[S.AUTH]:Se}});D(fe).use(be).use(ve).mount("#app");export{L as _,V as a};
