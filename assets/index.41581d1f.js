var j=Object.defineProperty;var x=Object.getOwnPropertySymbols;var D=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var E=(t,e,s)=>e in t?j(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,u=(t,e)=>{for(var s in e||(e={}))D.call(e,s)&&E(t,s,e[s]);if(x)for(var s of x(e))P.call(e,s)&&E(t,s,e[s]);return t};var T=(t,e,s)=>(E(t,typeof e!="symbol"?e+"":e,s),s);import{a as O,c as q,u as z,d as B,r as F,b as J,o as V,e as p,f as g,g as i,h as m,t as W,p as Z,i as K,j as $,F as Q,k as X,l as Y,m as ee,n as te}from"./vendor.18b15c6e.js";const se=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function s(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerpolicy&&(r.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?r.credentials="include":o.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(o){if(o.ep)return;o.ep=!0;const r=s(o);fetch(o.href,r)}};se();var H="/web/assets/LogoLong.298e9c85.png",Ye=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:H});function oe(t,e){localStorage.setItem(t,JSON.stringify(e))}function C(t,e=!0){let s=localStorage.getItem(t)||"{}";return e?JSON.parse(s):s}function ne(t,e){sessionStorage.setItem(t,JSON.stringify(e))}function re(t,e=!0){let s=sessionStorage.getItem(t)||"{}";return e?JSON.parse(s):s}var f;(function(t){t.SET_AUTH_STATUS="SET_AUTH_STATUS",t.SET_AUTH_DATA="SET_AUTH_DATA"})(f||(f={}));const ae={[f.SET_AUTH_STATUS]:(t,e)=>t.login=e===void 0?!t.login:e,[f.SET_AUTH_DATA]:(t,e)=>t.userInfo=e};var l;(function(t){t.LOGIN="loginCode",t.GET_INFO="getMe"})(l||(l={}));const ie={[l.GET_INFO]:async({commit:t,state:e},s)=>{let n=e.client;n.init(s);let{data:o}=await n.getMe();return t(f.SET_AUTH_DATA,o),o},[l.LOGIN]:async({commit:t,dispatch:e,state:s},n)=>{let r=await s.client.getToken(n);if(typeof r=="string")return t(f.SET_AUTH_STATUS,!0),e(l.GET_INFO,r),r}};var b;(function(t){t.GET_AUTHENTICATION="isAuthenticated"})(b||(b={}));const ce={[b.GET_AUTHENTICATION]:t=>t.login},ue="https://discord.com/api/v9",v=O.create({baseURL:ue,timeout:20*1e3,method:"GET"});v.interceptors.request.use(t=>t,t=>Promise.reject(t));v.interceptors.response.use(t=>t,t=>(t.response&&t.response.data?console.error("[Axios Error]",`Code: ${t.response.status}, Message: ${t.response.data.message}`):console.error(t),Promise.reject(t)));let d={invite:{dcServer:"https://discord.com/invite/uzzwFz3yh6",bot:"https://discord.com/oauth2/authorize?client_id=876367835486646282&scope=bot&permissions=268443710"},oauth2:{redirect_uri:"http://localhost:3000/discord-callback",server_callback:"/services/discord-callback"},mainApiUrl:"http://localhost:3001",languages:[{name:"\u7E41\u9AD4\u4E2D\u6587",area:{name:"\u53F0\u7063",icon:"https://www.mediafire.com/convkey/5079/rit79mf35jbjn465g.jpg"},mark:"ZH_TW"}],defaultLanguage:"ZH_TW"};class le{constructor(e,s=!0){T(this,"token");T(this,"Authorization");T(this,"BaseRequest");this.user=s,this.BaseRequest=v,this.init(e,s)}getTokenJson(){return C("token")||re("token")}savaToken(e,s=!0){(e==null?void 0:e.error)||(s?oe("token",e):ne("token",e))}init(e,s=!0){e||(e=this.getTokenJson()),typeof e!="string"&&e&&(this.savaToken(e),e=e==null?void 0:e.access_token),this.token=e,this.Authorization=`${s?"Bearer":"Bot"} ${e}`}async getToken(e){let{data:s}=await O({url:`${d.mainApiUrl}${d.oauth2.server_callback}`,method:"POST",data:{code:e,redirect_uri:d.oauth2.redirect_uri}});return this.savaToken(s),s.access_token?(this.token=s.access_token,s.access_token):s}getMe(){return this.BaseRequest(u({url:"/users/@me"},this.headers))}getGuilds(){return this.BaseRequest(u({url:"/users/@me/guilds"},this.headers))}getGuildChannel(e){return this.BaseRequest(u({url:`/guilds/${e}/channels`},this.headers))}getGuildMembers(e){return this.BaseRequest(u({url:`/guilds/${e}/members`},this.headers))}getGuildRoles(e){return this.BaseRequest(u({url:`/guilds/${e}/roles`},this.headers))}get headers(){return{headers:{Authorization:this.Authorization||""}}}}const de={login:!1,userInfo:void 0,client:new le},_e={namespaced:!0,mutations:ae,getters:ce,state:de,actions:ie},he={};var A;(function(t){t.getBotInfo="getBotInfo"})(A||(A={}));const fe={[A.getBotInfo]:(t,e)=>t.botInfo=e},pe={botInfo:void 0};var k;(function(t){t.loadBotInfo="loadBotInfo"})(k||(k={}));const ge={[k.loadBotInfo]:async({commit:t})=>{let{data:e}=await v({baseURL:d.mainApiUrl,url:"/api/discord/botInfo"});t(A.getBotInfo,e)}},me={namespaced:!0,mutations:fe,getters:he,state:pe,actions:ge},Te={},ve={};var Ae={},Se={},ye={EN_US:Ae,ZH_TW:Se};const Ie={get languages(){return d.languages},language:d.defaultLanguage,data:u({},ye)},Ee={},$e={namespaced:!0,mutations:ve,getters:Te,state:Ie,actions:Ee};var _;(function(t){t.AUTH="auth",t.CLIENT="client",t.I18N="i18n"})(_||(_={}));const be=q({modules:{[_.AUTH]:_e,[_.CLIENT]:me,[_.I18N]:$e}}),R=Symbol("vue-store");function ke(){return z(R)}var G=(t,e)=>{const s=t.__vccOpts||t;for(const[n,o]of e)s[n]=o;return s};const S=t=>(Z("data-v-daa8494e"),t=t(),K(),t),Le={class:"flex flex-item-center"},we=["href"],Ne=S(()=>i("img",{src:H,alt:""},null,-1)),Ue=S(()=>i("p",null,"Avery",-1)),xe=[Ne,Ue],Oe={class:"menu"},Be={class:"ul flex flex-item-center"},He={class:"user flex flex-item-center"},Ce=["src"],Re=["textContent"],Ge=S(()=>i("i",{class:"arrow"},null,-1)),Me=S(()=>i("div",{class:"licks"},null,-1)),je=B({setup(t){const e=ke(),s=F(null),n=J(()=>e.state.auth.userInfo),o="/web/",r=()=>window.open(`https://discord.com/api/oauth2/authorize?client_id=863676847731376170&redirect_uri=${d.oauth2.redirect_uri}&response_type=code&scope=identify+guilds+email`,"","width=500,height=620"),a=()=>s.value.classList.toggle("down"),y=c=>{e.dispatch(`${[_.AUTH]}/${l.LOGIN}`,c)},I=c=>{e.dispatch(`${_.AUTH}/${l.GET_INFO}`,c)};return V(()=>{let c=C("token");(c==null?void 0:c.access_token)&&I(c),addEventListener("get_dc_code",async w=>{var N,U;let h=w;((N=h==null?void 0:h.detail)==null?void 0:N.code)&&y((U=h==null?void 0:h.detail)==null?void 0:U.code)})}),(c,w)=>(p(),g("header",Le,[i("a",{href:m(o),class:"logo flex flex-item-center"},xe,8,we),i("div",Oe,[i("div",Be,[i("div",He,[m(n)?(p(),g("div",{key:0,class:"flex flex-item-center is-login",onClick:a,ref_key:"userEl",ref:s},[i("img",{src:`https://cdn.discordapp.com/avatars/${m(n).id}/${m(n).avatar}.png`,class:"user-icon",width:"45",alt:""},null,8,Ce),i("span",{class:"user-name",textContent:W(m(n).username)},null,8,Re),Ge,Me],512)):(p(),g("div",{key:1,class:"login",onClick:r},"\u767B\u5165"))])])])]))}});var De=G(je,[["__scopeId","data-v-daa8494e"]]);const Pe={};function qe(t,e){return p(),g("footer")}var ze=G(Pe,[["render",qe]]);const Fe={class:"wrapper"},Je=B({setup(t){return(e,s)=>{const n=X("router-view");return p(),g(Q,null,[$(De),i("div",Fe,[$(n)]),$(ze)],64)}}}),Ve="modulepreload",M={},We="/web/",L=function(e,s){return!s||s.length===0?e():Promise.all(s.map(n=>{if(n=`${We}${n}`,n in M)return;M[n]=!0;const o=n.endsWith(".css"),r=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${r}`))return;const a=document.createElement("link");if(a.rel=o?"stylesheet":Ve,o||(a.as="script",a.crossOrigin=""),a.href=n,document.head.appendChild(a),o)return new Promise((y,I)=>{a.addEventListener("load",y),a.addEventListener("error",I)})})).then(()=>e())},Ze=[{name:"Home",path:"/",component:()=>L(()=>import("./Home.7a7083cc.js"),["assets/Home.7a7083cc.js","assets/Home.ecc29976.css","assets/vendor.18b15c6e.js"])},{name:"dashboard",path:"/dashboard",component:()=>L(()=>import("./index.c9ca87d4.js"),["assets/index.c9ca87d4.js","assets/index.9bc1a98b.css","assets/vendor.18b15c6e.js"])},{name:"discordCallback",path:"/discord-callback",component:()=>L(()=>import("./discord.9e4f0c8e.js"),["assets/discord.9e4f0c8e.js","assets/vendor.18b15c6e.js"])}],Ke=Y({history:ee("/web/"),routes:Ze});te(Je).use(be,R).use(Ke).mount("#app");export{k as A,_ as M,Ye as _,G as a,H as b,d as c,ke as u};
