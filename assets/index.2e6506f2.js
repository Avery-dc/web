var x=Object.defineProperty;var v=Object.getOwnPropertySymbols;var O=Object.prototype.hasOwnProperty,$=Object.prototype.propertyIsEnumerable;var f=(s,e,t)=>e in s?x(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,y=(s,e)=>{for(var t in e||(e={}))O.call(e,t)&&f(s,t,e[t]);if(v)for(var t of v(e))$.call(e,t)&&f(s,t,e[t]);return s};var h=(s,e,t)=>(f(s,typeof e!="symbol"?e+"":e,t),t);import{a as k,d as b,r as q,o as l,c as u,b as c,u as p,p as A,e as E,f as I,g as m,F as C,h as N,i as P,j,k as T}from"./vendor.47666266.js";const z=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const n of i.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&o(n)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerpolicy&&(i.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?i.credentials="include":r.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}};z();var G="/web/assets/LogoLong.298e9c85.png";function V(s,e){localStorage.setItem(s,JSON.stringify(e))}function F(s,e=!0){let t=localStorage.getItem(s)||"{}";return e?JSON.parse(t):t}class H{constructor(e,t=!0){h(this,"token");h(this,"Authorization");h(this,"BaseRequest");this.user=t,this.BaseRequest=this.initRequest(),this.init(e,t)}init(e,t=!0){this.token=e||localStorage.getItem("token")||sessionStorage.getItem("token")||"",this.Authorization=`${t?"Bearer":"Bot"} ${e}`,this.BaseRequest=this.initRequest()}initRequest(){return k.create({baseURL:"https://discord.com/api/v9",method:"GET",headers:y({},this.headers)})}getMe(){return this.BaseRequest({url:"/users/@me"})}getGuilds(){return this.BaseRequest({url:"/users/@me/guilds"})}getGuildChannel(e){return this.BaseRequest({url:`/guilds/${e}/channels`})}getGuildMembers(e){return this.BaseRequest({url:`/guilds/${e}/members`})}getGuildRoles(e){return this.BaseRequest({url:`/guilds/${e}/roles`})}get headers(){return{Authorization:this.Authorization||""}}}var R=(s,e)=>{const t=s.__vccOpts||s;for(const[o,r]of e)t[o]=r;return t};const w=s=>(A("data-v-34394c3d"),s=s(),E(),s),M={class:"flex flex-item-center"},D=["href"],W=w(()=>c("img",{src:G,alt:""},null,-1)),J=w(()=>c("p",null,[I("Avery"),c("sup",null,"TW")],-1)),U=[W,J],K={class:"menu"},Q={class:"user"},X=["src"],Y=b({setup(s){const e=q({}),t="/web/";let o=F("token"),r=new H;(o==null?void 0:o.access_token)&&(r.init(o.access_token),r.getMe().then(n=>Object.assign(e,n.data)).catch(n=>console.log(n)));const i=()=>{window.open("https://discord.com/api/oauth2/authorize?client_id=863676847731376170&redirect_uri=http://localhost:3000/discord-callback&response_type=code&scope=identify+guilds+email","","width=500,height=620"),addEventListener("get_dc_code",async n=>{var d,g;let a=n;if((d=a==null?void 0:a.detail)==null?void 0:d.code){let{data:_}=await k({url:"http://localhost:3001/services/discord-callback",method:"POST",data:{code:(g=a.detail)==null?void 0:g.code,redirect_uri:"http://localhost:3000/discord-callback"}});if(!(_==null?void 0:_.error)){let{data:B}=await r.getMe();Object.assign(e,B),V("token",_||{})}}})};return(n,a)=>(l(),u("header",M,[c("a",{href:p(t),class:"logo flex flex-item-center"},U,8,D),c("div",K,[c("ul",null,[c("div",Q,[Object.keys(p(e)).length>0?(l(),u("div",{key:0,onClick:i},[c("div",null,[c("img",{src:`https://cdn.discordapp.com/avatars/${p(e).id}/${p(e).avatar}.png`,alt:""},null,8,X)])])):(l(),u("div",{key:1,onClick:i},"\u767B\u5165"))])])])]))}});var Z=R(Y,[["__scopeId","data-v-34394c3d"]]);const ee={};function te(s,e){return l(),u("footer")}var se=R(ee,[["render",te]]);const re={class:"wrapper"},oe=b({setup(s){return(e,t)=>{const o=N("router-view");return l(),u(C,null,[m(Z),c("div",re,[m(o)]),m(se)],64)}}}),ne="modulepreload",L={},ie="/web/",S=function(e,t){return!t||t.length===0?e():Promise.all(t.map(o=>{if(o=`${ie}${o}`,o in L)return;L[o]=!0;const r=o.endsWith(".css"),i=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${i}`))return;const n=document.createElement("link");if(n.rel=r?"stylesheet":ne,r||(n.as="script",n.crossOrigin=""),n.href=o,document.head.appendChild(n),r)return new Promise((a,d)=>{n.addEventListener("load",a),n.addEventListener("error",d)})})).then(()=>e())},ce=[{name:"Home",path:"/",component:()=>S(()=>import("./Home.eaff0c4e.js"),["assets/Home.eaff0c4e.js","assets/Home.6bd24356.css","assets/vendor.47666266.js"])},{name:"discordCallback",path:"/discord-callback",component:()=>S(()=>import("./discord.5525659d.js"),["assets/discord.5525659d.js","assets/vendor.47666266.js"])}],ae=P({history:j("/web/"),routes:ce});T(oe).use(ae).mount("#app");export{R as _,G as a};
