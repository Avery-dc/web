var $=Object.defineProperty;var k=Object.getOwnPropertySymbols;var O=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable;var m=(e,t,s)=>t in e?$(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,g=(e,t)=>{for(var s in t||(t={}))O.call(t,s)&&m(e,s,t[s]);if(k)for(var s of k(t))w.call(t,s)&&m(e,s,t[s]);return e};var p=(e,t,s)=>(m(e,typeof t!="symbol"?t+"":t,s),s);import{a as E,c as H,d as y,m as N,b as B,r as C,e as G,o as u,f as d,g as a,t as R,p as x,h as q,i as T,F as P,j as M,k as D,l as F,n as j}from"./vendor.65eab26b.js";const z=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const n of i.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&r(n)}).observe(document,{childList:!0,subtree:!0});function s(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=s(o);fetch(o.href,i)}};z();function V(e,t=!0){let s=localStorage.getItem(e)||"{}";return t?JSON.parse(s):s}var h;(function(e){e.GET_AUTHENTICATION="isAuthenticated"})(h||(h={}));const W={[h.GET_AUTHENTICATION]:e=>e.login},J="https://discord.com/api/v9",A=E.create({baseURL:J,timeout:20*1e3});A.interceptors.request.use(e=>e,e=>Promise.reject(e));A.interceptors.response.use(e=>e,e=>(e.response&&e.response.data?console.error("[Axios Error]",`Code: ${e.response.status}, Message: ${e.response.data.message}`):console.error(e),Promise.reject(e)));class K{constructor(t,s=!0){p(this,"token");p(this,"Authorization");p(this,"BaseRequest");this.user=s,this.BaseRequest=A,this.init(t,s)}init(t,s=!0){this.token=t||localStorage.getItem("token")||sessionStorage.getItem("token")||"",this.Authorization=`${s?"Bearer":"Bot"} ${t}`}async getToken(t){let{data:s}=await E({url:"http://localhost:3001/services/discord-callback",method:"POST",data:{code:t,redirect_uri:"http://localhost:3000/discord-callback"}});return s.access_token?(this.token=s.access_token,s.access_token):s}getMe(){return this.BaseRequest({url:"/users/@me"})}getGuilds(){return this.BaseRequest({url:"/users/@me/guilds"})}getGuildChannel(t){return this.BaseRequest({url:`/guilds/${t}/channels`})}getGuildMembers(t){return this.BaseRequest({url:`/guilds/${t}/members`})}getGuildRoles(t){return this.BaseRequest({url:`/guilds/${t}/roles`})}get headers(){return{Authorization:this.Authorization||""}}}var l;(function(e){e.SET_AUTH_STATUS="SET_AUTH_STATUS",e.SET_AUTH_DATA="SET_AUTH_DATA"})(l||(l={}));const Q={[l.SET_AUTH_STATUS]:(e,t)=>e.login=t===void 0?!e.login:t,[l.SET_AUTH_DATA]:(e,t)=>e.userInfo=t},v=new K;var c;(function(e){e.LOGIN="loginCode",e.GET_INFO="getMe"})(c||(c={}));c.GET_INFO+"",c.LOGIN+"";const X={login:!1,userInfo:{}},Y={namespaced:!0,mutations:Q,getters:W,state:X};var _;(function(e){e.AUTH="auth"})(_||(_={}));const Z=H({modules:{[_.AUTH]:Y}});var ee="/web/assets/LogoLong.298e9c85.png";var S=(e,t)=>{const s=e.__vccOpts||e;for(const[r,o]of t)s[r]=o;return s};const te=y({computed:g({},N(_.AUTH,{isAuthenticated:h.GET_AUTHENTICATION})),methods:g({},B(_.AUTH,[c.LOGIN,c.GET_INFO])),mounted(){let e=V("token");(e==null?void 0:e.access_token)&&this.getMe(e.access_token),addEventListener("get_dc_code",async t=>{var r;let s=t;((r=s==null?void 0:s.detail)==null?void 0:r.code)&&console.log(this.getMe(s.detail.code))})},setup(){const e=C(null),t=G({});return{login:()=>window.open("https://discord.com/api/oauth2/authorize?client_id=863676847731376170&redirect_uri=http://localhost:3000/discord-callback&response_type=code&scope=identify+guilds+email","","width=500,height=620"),userEl:e,dc_data:t,BASE_URL:"/web/",openLicks:()=>e.value.classList.toggle("down")}}}),f=e=>(x("data-v-26309449"),e=e(),q(),e),se={class:"flex flex-item-center"},oe=["href"],re=f(()=>a("img",{src:ee,alt:""},null,-1)),ne=f(()=>a("p",null,"Avery",-1)),ie=[re,ne],ae={class:"menu"},ce={class:"ul flex flex-item-center"},le={class:"user flex flex-item-center"},ue=["src"],de=["textContent"],_e=f(()=>a("i",{class:"arrow"},null,-1)),pe=f(()=>a("div",{class:"licks"},null,-1));function he(e,t,s,r,o,i){return u(),d("header",se,[a("a",{href:e.BASE_URL,class:"logo flex flex-item-center"},ie,8,oe),a("div",ae,[a("div",ce,[a("div",le,[Object.keys(e.dc_data).length>0?(u(),d("div",{key:0,class:"flex flex-item-center is-login",onClick:t[0]||(t[0]=(...n)=>e.openLicks&&e.openLicks(...n)),ref:"userEl"},[a("img",{src:`https://cdn.discordapp.com/avatars/${e.dc_data.id}/${e.dc_data.avatar}.png`,class:"user-icon",width:"45",alt:""},null,8,ue),a("span",{class:"user-name",textContent:R(e.dc_data.username)},null,8,de),_e,pe],512)):(u(),d("div",{key:1,class:"login",onClick:t[1]||(t[1]=(...n)=>e.login&&e.login(...n))},"\u767B\u5165"))])])])])}var fe=S(te,[["render",he],["__scopeId","data-v-26309449"]]);const me={};function ge(e,t){return u(),d("footer")}var Te=S(me,[["render",ge]]);const Ae={class:"wrapper"},ve=y({setup(e){return(t,s)=>{const r=M("router-view");return u(),d(P,null,[T(fe),a("div",Ae,[T(r)]),T(Te)],64)}}}),ke="modulepreload",I={},Ee="/web/",L=function(t,s){return!s||s.length===0?t():Promise.all(s.map(r=>{if(r=`${Ee}${r}`,r in I)return;I[r]=!0;const o=r.endsWith(".css"),i=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${i}`))return;const n=document.createElement("link");if(n.rel=o?"stylesheet":ke,o||(n.as="script",n.crossOrigin=""),n.href=r,document.head.appendChild(n),o)return new Promise((U,b)=>{n.addEventListener("load",U),n.addEventListener("error",b)})})).then(()=>t())},ye=[{name:"Home",path:"/",component:()=>L(()=>import("./Home.819b7e28.js"),["assets/Home.819b7e28.js","assets/Home.2bd0fa25.css","assets/vendor.65eab26b.js"])},{name:"discordCallback",path:"/discord-callback",component:()=>L(()=>import("./discord.ff0baf89.js"),["assets/discord.ff0baf89.js","assets/vendor.65eab26b.js"])}],Se=D({history:F("/web/"),routes:ye});j(ve).use(Z).use(Se).mount("#app");export{S as _,ee as a};
