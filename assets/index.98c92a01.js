var O=Object.defineProperty;var x=Object.getOwnPropertySymbols;var $=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var g=(s,e,t)=>e in s?O(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,w=(s,e)=>{for(var t in e||(e={}))$.call(e,t)&&g(s,t,e[t]);if(x)for(var t of x(e))q.call(e,t)&&g(s,t,e[t]);return s};var f=(s,e,t)=>(g(s,typeof e!="symbol"?e+"":e,t),t);import{a as L,d as R,r as I,b as C,o as u,c as d,e as c,u as _,t as P,p as j,f as N,g as v,F as H,h as M,i as T,j as z,k as G,l as D}from"./vendor.aaf71282.js";const F=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function t(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerpolicy&&(r.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?r.credentials="include":o.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(o){if(o.ep)return;o.ep=!0;const r=t(o);fetch(o.href,r)}};F();var U="/web/assets/LogoLong.298e9c85.png";function V(s,e){localStorage.setItem(s,JSON.stringify(e))}function J(s,e=!0){let t=localStorage.getItem(s)||"{}";return e?JSON.parse(t):t}class W{constructor(e,t=!0){f(this,"token");f(this,"Authorization");f(this,"BaseRequest");this.user=t,this.BaseRequest=this.initRequest(),this.init(e,t)}init(e,t=!0){this.token=e||localStorage.getItem("token")||sessionStorage.getItem("token")||"",this.Authorization=`${t?"Bearer":"Bot"} ${e}`,this.BaseRequest=this.initRequest()}initRequest(){return L.create({baseURL:"https://discord.com/api/v9",method:"GET",headers:w({},this.headers)})}getMe(){return this.BaseRequest({url:"/users/@me"})}getGuilds(){return this.BaseRequest({url:"/users/@me/guilds"})}getGuildChannel(e){return this.BaseRequest({url:`/guilds/${e}/channels`})}getGuildMembers(e){return this.BaseRequest({url:`/guilds/${e}/members`})}getGuildRoles(e){return this.BaseRequest({url:`/guilds/${e}/roles`})}get headers(){return{Authorization:this.Authorization||""}}}var S=(s,e)=>{const t=s.__vccOpts||s;for(const[n,o]of e)t[n]=o;return t};const p=s=>(j("data-v-6a85f87c"),s=s(),N(),s),K={class:"flex flex-item-center"},Q=["href"],X=p(()=>c("img",{src:U,alt:""},null,-1)),Y=p(()=>c("p",null,"Avery",-1)),Z=[X,Y],ee={class:"menu"},te={class:"ul flex flex-item-center"},se={class:"user flex flex-item-center"},oe=["src"],re=["textContent"],ne=p(()=>c("i",{class:"arrow"},null,-1)),ie=p(()=>c("div",{class:"licks"},null,-1)),ce=R({setup(s){const e=I(null),t=C({}),n="/web/";let o=J("token"),r=new W;(o==null?void 0:o.access_token)&&(r.init(o.access_token),r.getMe().then(a=>Object.assign(t,a.data)).catch(a=>console.log(a)));const i=()=>{window.open("https://discord.com/api/oauth2/authorize?client_id=863676847731376170&redirect_uri=http://localhost:3000/discord-callback&response_type=code&scope=identify+guilds+email","","width=500,height=620"),addEventListener("get_dc_code",async a=>{var k,b;let l=a;if((k=l==null?void 0:l.detail)==null?void 0:k.code){let{data:h}=await L({url:"http://localhost:3001/services/discord-callback",method:"POST",data:{code:(b=l.detail)==null?void 0:b.code,redirect_uri:"http://localhost:3000/discord-callback"}});if(!(h==null?void 0:h.error)){let{data:E}=await r.getMe();Object.assign(t,E),V("token",h||{})}}})},m=()=>e.value.classList.toggle("down");return(a,l)=>(u(),d("header",K,[c("a",{href:_(n),class:"logo flex flex-item-center"},Z,8,Q),c("div",ee,[c("div",te,[c("div",se,[Object.keys(_(t)).length>0?(u(),d("div",{key:0,class:"flex flex-item-center is-login",onClick:m,ref_key:"userEl",ref:e},[c("img",{src:`https://cdn.discordapp.com/avatars/${_(t).id}/${_(t).avatar}.png`,class:"user-icon",width:"45",alt:""},null,8,oe),c("span",{class:"user-name",textContent:P(_(t).username)},null,8,re),ne,ie],512)):(u(),d("div",{key:1,class:"login",onClick:i},"\u767B\u5165"))])])])]))}});var ae=S(ce,[["__scopeId","data-v-6a85f87c"]]);const le={};function ue(s,e){return u(),d("footer")}var de=S(le,[["render",ue]]);const _e={class:"wrapper"},he=R({setup(s){return(e,t)=>{const n=M("router-view");return u(),d(H,null,[v(ae),c("div",_e,[v(n)]),v(de)],64)}}}),fe="modulepreload",A={},pe="/web/",B=function(e,t){return!t||t.length===0?e():Promise.all(t.map(n=>{if(n=`${pe}${n}`,n in A)return;A[n]=!0;const o=n.endsWith(".css"),r=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${r}`))return;const i=document.createElement("link");if(i.rel=o?"stylesheet":fe,o||(i.as="script",i.crossOrigin=""),i.href=n,document.head.appendChild(i),o)return new Promise((m,a)=>{i.addEventListener("load",m),i.addEventListener("error",a)})})).then(()=>e())},me=[{name:"Home",path:"/",component:()=>B(()=>import("./Home.565d228b.js"),["assets/Home.565d228b.js","assets/Home.2bd0fa25.css","assets/vendor.aaf71282.js"])},{name:"discordCallback",path:"/discord-callback",component:()=>B(()=>import("./discord.ff08f877.js"),["assets/discord.ff08f877.js","assets/vendor.aaf71282.js"])}],ge=T({history:z("/web/"),routes:me}),ve={},ye={namespaced:!0,state:()=>ve,mutations};var y;(function(s){s.AUTH="auth"})(y||(y={}));const ke=G({modules:{[y.AUTH]:ye}});D(he).use(ke).use(ge).mount("#app");export{S as _,U as a};
