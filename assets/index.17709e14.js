var U=Object.defineProperty;var S=Object.getOwnPropertySymbols;var H=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var m=(e,t,s)=>t in e?U(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,c=(e,t)=>{for(var s in t||(t={}))H.call(t,s)&&m(e,s,t[s]);if(S)for(var s of S(t))N.call(t,s)&&m(e,s,t[s]);return e};var h=(e,t,s)=>(m(e,typeof t!="symbol"?t+"":t,s),s);import{a as y,c as B,u as C,d as k,r as R,b as x,e as G,o as d,f as _,g as a,t as q,p as M,h as P,i as g,F as j,j as D,k as F,l as z,m as V}from"./vendor.b9ffea17.js";const W=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function s(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerpolicy&&(n.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?n.credentials="include":o.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(o){if(o.ep)return;o.ep=!0;const n=s(o);fetch(o.href,n)}};W();function J(e,t=!0){let s=localStorage.getItem(e)||"{}";return t?JSON.parse(s):s}const K="https://discord.com/api/v9",T=y.create({baseURL:K,timeout:20*1e3,method:"GET"});T.interceptors.request.use(e=>e,e=>Promise.reject(e));T.interceptors.response.use(e=>e,e=>(e.response&&e.response.data?console.error("[Axios Error]",`Code: ${e.response.status}, Message: ${e.response.data.message}`):console.error(e),Promise.reject(e)));class E{constructor(t,s=!0){h(this,"token");h(this,"Authorization");h(this,"BaseRequest");this.user=s,this.BaseRequest=T,this.init(t,s)}init(t,s=!0){t=t||localStorage.getItem("token")||sessionStorage.getItem("token")||"",this.token=t,this.Authorization=`${s?"Bearer":"Bot"} ${t}`}async getToken(t){let{data:s}=await y({url:"http://localhost:3001/services/discord-callback",method:"POST",data:{code:t,redirect_uri:"http://localhost:3000/discord-callback"}});return s.access_token?(this.token=s.access_token,s.access_token):s}getMe(){return this.BaseRequest(c({url:"/users/@me"},this.headers))}getGuilds(){return this.BaseRequest(c({url:"/users/@me/guilds"},this.headers))}getGuildChannel(t){return this.BaseRequest(c({url:`/guilds/${t}/channels`},this.headers))}getGuildMembers(t){return this.BaseRequest(c({url:`/guilds/${t}/members`},this.headers))}getGuildRoles(t){return this.BaseRequest(c({url:`/guilds/${t}/roles`},this.headers))}get headers(){return{headers:{Authorization:this.Authorization||""}}}}Object.assign(window,{DiscordApi:E});var l;(function(e){e.SET_AUTH_STATUS="SET_AUTH_STATUS",e.SET_AUTH_DATA="SET_AUTH_DATA"})(l||(l={}));const Q={[l.SET_AUTH_STATUS]:(e,t)=>e.login=t===void 0?!e.login:t,[l.SET_AUTH_DATA]:(e,t)=>e.userInfo=t},v=new E;var u;(function(e){e.LOGIN="loginCode",e.GET_INFO="getMe"})(u||(u={}));const X={[u.GET_INFO]:async({commit:e},t)=>{v.init(t);let{data:s}=await v.getMe();return e(l.SET_AUTH_DATA,s),s},[u.LOGIN]:async({commit:e,dispatch:t},s)=>{let r=await v.getToken(s);if(typeof r=="string")return e(l.SET_AUTH_STATUS,!0),t(u.GET_INFO,r),r}};var A;(function(e){e.GET_AUTHENTICATION="isAuthenticated"})(A||(A={}));const Y={[A.GET_AUTHENTICATION]:e=>e.login},Z={login:!1,userInfo:void 0},ee={namespaced:!0,mutations:Q,getters:Y,state:Z,actions:X};var p;(function(e){e.AUTH="auth"})(p||(p={}));const te=B({modules:{[p.AUTH]:ee}}),$=Symbol("vue-store");function se(){return C($)}var oe="/web/assets/LogoLong.298e9c85.png";var b=(e,t)=>{const s=e.__vccOpts||e;for(const[r,o]of t)s[r]=o;return s};const re=k({methods:{getMe(e){this.store.dispatch(`${[p.AUTH]}/${u.LOGIN}`,e)}},mounted(){let e=J("token");(e==null?void 0:e.access_token)&&this.getMe(e.access_token),addEventListener("get_dc_code",async t=>{var r,o;let s=t;((r=s==null?void 0:s.detail)==null?void 0:r.code)&&this.getMe((o=s==null?void 0:s.detail)==null?void 0:o.code)})},setup(){const e=se(),t=R(null),s=x(()=>e.state.auth.userInfo);G(c({},e.state.auth.userInfo));const r="/web/",o=()=>window.open("https://discord.com/api/oauth2/authorize?client_id=863676847731376170&redirect_uri=http://localhost:3000/discord-callback&response_type=code&scope=identify+guilds+email","","width=500,height=620"),n=()=>t.value.classList.toggle("down");return Object.assign(window,{store:e}),{login:o,userEl:t,dc_data:s,BASE_URL:r,openLicks:n,store:e}}}),f=e=>(M("data-v-1c5cf272"),e=e(),P(),e),ne={class:"flex flex-item-center"},ie=["href"],ae=f(()=>a("img",{src:oe,alt:""},null,-1)),ce=f(()=>a("p",null,"Avery",-1)),le=[ae,ce],ue={class:"menu"},de={class:"ul flex flex-item-center"},_e={class:"user flex flex-item-center"},he=["src"],pe=["textContent"],fe=f(()=>a("i",{class:"arrow"},null,-1)),me=f(()=>a("div",{class:"licks"},null,-1));function ge(e,t,s,r,o,n){return d(),_("header",ne,[a("a",{href:e.BASE_URL,class:"logo flex flex-item-center"},le,8,ie),a("div",ue,[a("div",de,[a("div",_e,[e.dc_data?(d(),_("div",{key:0,class:"flex flex-item-center is-login",onClick:t[0]||(t[0]=(...i)=>e.openLicks&&e.openLicks(...i)),ref:"userEl"},[a("img",{src:`https://cdn.discordapp.com/avatars/${e.dc_data.id}/${e.dc_data.avatar}.png`,class:"user-icon",width:"45",alt:""},null,8,he),a("span",{class:"user-name",textContent:q(e.dc_data.username)},null,8,pe),fe,me],512)):(d(),_("div",{key:1,class:"login",onClick:t[1]||(t[1]=(...i)=>e.login&&e.login(...i))},"\u767B\u5165"))])])])])}var Te=b(re,[["render",ge],["__scopeId","data-v-1c5cf272"]]);const ve={};function Ae(e,t){return d(),_("footer")}var Se=b(ve,[["render",Ae]]);const ye={class:"wrapper"},ke=k({setup(e){return(t,s)=>{const r=D("router-view");return d(),_(j,null,[g(Te),a("div",ye,[g(r)]),g(Se)],64)}}}),Ee="modulepreload",w={},$e="/web/",I=function(t,s){return!s||s.length===0?t():Promise.all(s.map(r=>{if(r=`${$e}${r}`,r in w)return;w[r]=!0;const o=r.endsWith(".css"),n=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${n}`))return;const i=document.createElement("link");if(i.rel=o?"stylesheet":Ee,o||(i.as="script",i.crossOrigin=""),i.href=r,document.head.appendChild(i),o)return new Promise((L,O)=>{i.addEventListener("load",L),i.addEventListener("error",O)})})).then(()=>t())},be=[{name:"Home",path:"/",component:()=>I(()=>import("./Home.a1d0ed1b.js"),["assets/Home.a1d0ed1b.js","assets/Home.2bd0fa25.css","assets/vendor.b9ffea17.js"])},{name:"discordCallback",path:"/discord-callback",component:()=>I(()=>import("./discord.fb6b4229.js"),["assets/discord.fb6b4229.js","assets/vendor.b9ffea17.js"])}],we=F({history:z("/web/"),routes:be});V(ke).use(te,$).use(we).mount("#app");export{b as _,oe as a};
