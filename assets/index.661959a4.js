var O=Object.defineProperty;var b=Object.getOwnPropertySymbols;var $=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var g=(o,e,t)=>e in o?O(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t,x=(o,e)=>{for(var t in e||(e={}))$.call(e,t)&&g(o,t,e[t]);if(b)for(var t of b(e))q.call(e,t)&&g(o,t,e[t]);return o};var p=(o,e,t)=>(g(o,typeof e!="symbol"?e+"":e,t),t);import{a as w,d as L,r as A,b as I,o as u,c as d,e as c,u as _,t as C,p as P,f as j,g as v,F as N,h as z,i as G,j as D,k as F}from"./vendor.d9fb27f1.js";const H=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerpolicy&&(r.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?r.credentials="include":s.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}};H();var M="/web/assets/LogoLong.298e9c85.png";function T(o,e){localStorage.setItem(o,JSON.stringify(e))}function V(o,e=!0){let t=localStorage.getItem(o)||"{}";return e?JSON.parse(t):t}class J{constructor(e,t=!0){p(this,"token");p(this,"Authorization");p(this,"BaseRequest");this.user=t,this.BaseRequest=this.initRequest(),this.init(e,t)}init(e,t=!0){this.token=e||localStorage.getItem("token")||sessionStorage.getItem("token")||"",this.Authorization=`${t?"Bearer":"Bot"} ${e}`,this.BaseRequest=this.initRequest()}initRequest(){return w.create({baseURL:"https://discord.com/api/v9",method:"GET",headers:x({},this.headers)})}getMe(){return this.BaseRequest({url:"/users/@me"})}getGuilds(){return this.BaseRequest({url:"/users/@me/guilds"})}getGuildChannel(e){return this.BaseRequest({url:`/guilds/${e}/channels`})}getGuildMembers(e){return this.BaseRequest({url:`/guilds/${e}/members`})}getGuildRoles(e){return this.BaseRequest({url:`/guilds/${e}/roles`})}get headers(){return{Authorization:this.Authorization||""}}}var R=(o,e)=>{const t=o.__vccOpts||o;for(const[n,s]of e)t[n]=s;return t};const f=o=>(P("data-v-6a85f87c"),o=o(),j(),o),U={class:"flex flex-item-center"},W=["href"],K=f(()=>c("img",{src:M,alt:""},null,-1)),Q=f(()=>c("p",null,"Avery",-1)),X=[K,Q],Y={class:"menu"},Z={class:"ul flex flex-item-center"},ee={class:"user flex flex-item-center"},te=["src"],se=["textContent"],oe=f(()=>c("i",{class:"arrow"},null,-1)),re=f(()=>c("div",{class:"licks"},null,-1)),ne=L({setup(o){const e=A(null),t=I({}),n="/web/";let s=V("token"),r=new J;(s==null?void 0:s.access_token)&&(r.init(s.access_token),r.getMe().then(a=>Object.assign(t,a.data)).catch(a=>console.log(a)));const i=()=>{window.open("https://discord.com/api/oauth2/authorize?client_id=863676847731376170&redirect_uri=http://localhost:3000/discord-callback&response_type=code&scope=identify+guilds+email","","width=500,height=620"),addEventListener("get_dc_code",async a=>{var y,k;let l=a;if((y=l==null?void 0:l.detail)==null?void 0:y.code){let{data:h}=await w({url:"http://localhost:3001/services/discord-callback",method:"POST",data:{code:(k=l.detail)==null?void 0:k.code,redirect_uri:"http://localhost:3000/discord-callback"}});if(!(h==null?void 0:h.error)){let{data:E}=await r.getMe();Object.assign(t,E),T("token",h||{})}}})},m=()=>e.value.classList.toggle("down");return(a,l)=>(u(),d("header",U,[c("a",{href:_(n),class:"logo flex flex-item-center"},X,8,W),c("div",Y,[c("div",Z,[c("div",ee,[Object.keys(_(t)).length>0?(u(),d("div",{key:0,class:"flex flex-item-center is-login",onClick:m,ref_key:"userEl",ref:e},[c("img",{src:`https://cdn.discordapp.com/avatars/${_(t).id}/${_(t).avatar}.png`,class:"user-icon",width:"45",alt:""},null,8,te),c("span",{class:"user-name",textContent:C(_(t).username)},null,8,se),oe,re],512)):(u(),d("div",{key:1,class:"login",onClick:i},"\u767B\u5165"))])])])]))}});var ie=R(ne,[["__scopeId","data-v-6a85f87c"]]);const ce={};function ae(o,e){return u(),d("footer")}var le=R(ce,[["render",ae]]);const ue={class:"wrapper"},de=L({setup(o){return(e,t)=>{const n=z("router-view");return u(),d(N,null,[v(ie),c("div",ue,[v(n)]),v(le)],64)}}}),_e="modulepreload",S={},he="/web/",B=function(e,t){return!t||t.length===0?e():Promise.all(t.map(n=>{if(n=`${he}${n}`,n in S)return;S[n]=!0;const s=n.endsWith(".css"),r=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${r}`))return;const i=document.createElement("link");if(i.rel=s?"stylesheet":_e,s||(i.as="script",i.crossOrigin=""),i.href=n,document.head.appendChild(i),s)return new Promise((m,a)=>{i.addEventListener("load",m),i.addEventListener("error",a)})})).then(()=>e())},pe=[{name:"Home",path:"/",component:()=>B(()=>import("./Home.56175336.js"),["assets/Home.56175336.js","assets/Home.2bd0fa25.css","assets/vendor.d9fb27f1.js"])},{name:"discordCallback",path:"/discord-callback",component:()=>B(()=>import("./discord.b2cf5770.js"),["assets/discord.b2cf5770.js","assets/vendor.d9fb27f1.js"])}],fe=G({history:D("/web/"),routes:pe});F(de).use(fe).mount("#app");export{R as _,M as a};
